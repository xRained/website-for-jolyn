<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>For My Lovey, Jolyn</title>
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Montserrat:wght@300;400;600&display=swap" rel="stylesheet">
    
    <!-- Stylesheet -->
    <link rel="stylesheet" href="style.css">

    <!-- Leaflet.js for Maps -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
</head>
<body>

    <header>
        <nav>
            <ul>
                <li><a href="#about">About You</a></li>
                <li><a href="#gallery">Gallery</a></li>
                <li><a href="#notes">Love Notes</a></li>
                <li><a href="#timeline">Our Story</a></li>
                <li><a href="#location">Our Map</a></li>
            </ul>
            <ul id="auth-container">
                <!-- Login/Logout button will appear here -->
            </ul>
        </nav>
    </header>

    <main>
        <!-- Hero Section -->
        <section id="hero">
            <div class="hero-content">
                <h1>For My Lovey, Jolyn</h1>
                <p>A little corner of the internet dedicated to you.</p>
            </div>
        </section>

        <!-- About Her Section -->
        <section id="about" class="content-section">
            <h2 class="section-title">The One and Only</h2>
            <div class="about-content">
                <!-- Replace with a picture of her -->
                <img src="https://via.placeholder.com/250" alt="A beautiful picture of Jolyn" class="profile-pic">
                <!-- Replace with your own words about her -->
                <p>
                    From the moment we met, I knew you were special. This section is all about you—your kindness that brightens every room, your laugh that is my favorite sound, and the incredible way you make every day better just by being in it. You are more than I could have ever wished for.
                </p>
            </div>
        </section>

        <!-- Photo Gallery Section -->
        <section id="gallery" class="content-section">
            <h2 class="section-title">Our Moments</h2>
            <div class="gallery-grid">
                <!-- Photo gallery will be loaded here by JavaScript -->
            </div>
            <!-- New Gallery Upload Form -->
            <div class="upload-button-container">
                <button id="open-upload-modal-button" class="cta-button">+ Add Moment</button>
            </div>
        </section>

        <!-- Love Notes Section -->
        <section id="notes" class="content-section">
            <h2 class="section-title">Little Love Notes</h2>
            <div class="notes-container">
                <!-- Love notes will be loaded here by JavaScript -->
            </div>
        </section>

        <!-- Relationship Timeline Section -->
        <section id="timeline" class="content-section">
            <h2 class="section-title">Our Story So Far</h2>
            <div class="timeline-container">
                <!-- Timeline events will be loaded here by JavaScript -->
            </div>
        </section>

        <!-- Her Favorites Section -->
        <section id="favorites" class="content-section">
            <h2 class="section-title">A Few of Your Favorite Things</h2>
            <ul class="favorites-list">
                <!-- Favorites will be loaded here by JavaScript -->
            </ul>
        </section>

        <!-- Live Location Section -->
        <section id="location" class="content-section">
            <h2 class="section-title">Our Live Map</h2>
            <div id="location-controls" style="text-align: center;">
                <button id="add-location-button" class="cta-button">Add Live Location</button>
                <div id="user-profile-area" style="display: none; margin-top: 20px;">
                    <p>Welcome, <span id="user-name"></span>!</p>
                    <img id="user-icon" src="https://via.placeholder.com/50" alt="Your Icon" style="width: 50px; height: 50px; border-radius: 50%;"/>
                    <p>Update your profile icon:</p>
                    <input type="file" id="icon-upload" accept="image/*">
                    <button id="upload-button">Upload</button>
                    <p id="upload-status"></p>
                </div>
            </div>
            <div id="map">
                <!-- The map will be loaded here -->
            </div>
            <p class="location-notice">Login to start sharing your location and see our map!</p>
        </section>

        <!-- Closing Message Section -->
        <section id="closing" class="content-section">
            <h2 class="section-title">Always and Forever</h2>
            <!-- Replace with your heartfelt closing message -->
            <p class="closing-message">
                Jolyn, you are my everything. This website is just a small token of my love for you. Every day with you is a gift, and I cherish every moment. Thank you for being you. I love you more than words can say.
            </p>
            <p class="signature">With all my love,</p>
            <!-- Replace with your name -->
            <p class="signature">Edrian</p>
        </section>
    </main>

    <footer>
        <p>Made with ❤️ for the one and only Jolyn.</p>
    </footer>

    <!-- Upload Modal (Moved here to fix layout issues) -->
    <div id="upload-modal" class="modal">
        <div class="modal-content">
            <span class="close-button">&times;</span>
            <h2>Upload a New Moment</h2>
            <div id="image-preview-container" style="display: none;">
                <img id="image-preview" src="#" alt="Image preview"/>
            </div>
            <label for="gallery-upload-file" class="file-input-label">Choose a Photo</label>
            <input type="file" id="gallery-upload-file" accept="image/*" style="display: none;">
            <button id="gallery-upload-button" class="cta-button">Upload Photo</button>
        </div>
    </div>

    <!-- Fullscreen Image Viewer Modal -->
    <div id="image-viewer-modal" class="modal">
        <span class="close-viewer-button">&times;</span>
        <img class="modal-image-content" id="fullscreen-image">
    </div>

    <!-- Supabase SDK -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>

    <script>
      // --- Supabase Initialization ---
      // IMPORTANT: Replace with your actual Project URL and Anon Key from Supabase settings
      const SUPABASE_URL = 'https://apolwnnlwkotsbxpubbv.supabase.co'; 
      const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImFwb2x3bm5sd2tvdHNieHB1YmJ2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQ0MDUzODQsImV4cCI6MjA3OTk4MTM4NH0.F5qZRmmwi0ylBuhBMeY1FPfyYcswm32dGHXtiALu9lE';

      window.supabaseClient = supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);
    </script>

    <script src="script.js"></script>
</body>
</html>
